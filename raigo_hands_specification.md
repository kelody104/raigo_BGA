## 役の優先順位
1. **雷神役**
2. **基本役**
3. **特殊役**
4. **組み合わせ役**

### 判定の原則
- **重複不可:** 1つの塔に対して複数の役の条件を満たしている場合でも、役は重複して成立しません。
- **優先順位:** 上記の優先順位に従い、最も高い分類の役が1つだけ判定されます。同一分類内でも原則として点数の高い役が優先されます。
- **具体例:** 全ての駒が同じ重さ（例：「雷」6枚）の塔の場合、**基本役 (桜花)** と **組み合わせ役 (桜々花)** の両方の条件を満たしますが、優先順位の高い **「六重染め桜花」** として判定されます。

## 役の共通ルール (Common Rules)
### 加点要素 (Bonus Points)
基本役および一部の組み合わせ役には、以下の加点要素が適用される。
1. **高さ加点 (Height Bonus):**
   - 4段以上の塔の場合、`段数 - 3` 点を加算する。
2. **染め加点 (Sone Bonus):**
   - 塔を構成する全ての駒の種類 (`type`) が一致している場合、**1点**を加算する。

### 命名ルール (Naming Convention)
基本役および組み合わせ役の名称は以下の形式で構成される。
- **[段数詞]＋[染め（任意）]＋[役名]**
  - 段数詞: 三重（3段）、四重（4段）、五重（5段）、六重（6段）
  - 染め: 全ての `type` が一致している場合に挿入
- **例:**
  - 3段の桜花 → **三重桜花**
  - 4段で全て同種の桜花 → **四重染め桜花**

---

## 1. 雷神役 (Raijin-yaku)
最高位の役。特定の名前を持つ駒の特定の並び順で構成される。

### 時雨蓮花 (Shigure Renge)
- **基礎点:** 10点
- **追加点:** 0点
- **成立条件:** 6枚の塔をポップした順序が以下の名前であること。
  - **①:** 斬（Zan）
  - **②:** 陣（Jin）
  - **③:** 轟（Go）
  - **④:** 霧（Mu）
  - **⑤:** 瞬（Shun）
  - **⑥:** 浄（Jo）
  - **判定形式:** `「①②③④⑤⑥」＝「斬陣轟霧瞬浄」`

### 桜花乱舞 (Ouka Ranbu)
- **基礎点:** 11点
- **追加点:** 0点
- **成立条件:** 以下のいずれかの並び順であること。
  - **パターンA:** `「①②③④⑤⑥」＝「五轟五轟五轟」`
  - **パターンB:** `「①②③④⑤⑥」＝「轟五轟五轟五」`

### 霞・双頭連 (Kasumi Soutouren)
- **基礎点:** 11点
- **追加点:** 0点
- **成立条件:** `「①②③④⑤⑥」＝「轟轟轟霧瞬浄」`

### 霧幻輪廻 (Mugen Rinne)
- **基礎点:** 12点
- **追加点:** 0点
- **成立条件:** 以下のいずれかの並び順であること。
  - **パターンA:** `「①②③④⑤⑥」＝「六霧六霧六霧」`
  - **パターンB:** `「①②③④⑤⑥」＝「霧六霧六霧六」`

### 毘沙門櫓 (Bishamon Yagura)
- **基礎点:** 12点
- **追加点:** 0点
- **成立条件:** `「①②③④⑤⑥」＝「斬斬斬斬斬斬」`

### 六花白雪 (Rikka Shirayuki)
- **基礎点:** 12点
- **追加点:** 0点
- **成立条件:** `「①②③④⑤⑥」＝`「六六霧霧瞬瞬」

---

## 2. 特殊役 (Tokushu-yaku)
特定のゲーム進行状況や、駒の特殊な組み合わせによって成立する役。

### 椿 (Tsubaki)
- **基礎点:** 6点
- **追加点:** 0点
- **成立条件:** 6枚の塔で、以下のペアの `name` および `weight` が一致していること。
  - **(①, ②)** の名前と重さが同じ
  - **(③, ④)** の名前と重さが同じ
  - **(⑤, ⑥)** の名前と重さが同じ

### 山茶花 (Sasanqua)
- **基礎点:** 4点
- **追加点:** 0点
- **成立条件:** 6枚の塔で、以下のペアの **重さ (weight)** が一致していること。
  - **(①, ②)** の重さが同じ
  - **(③, ④)** の重さが同じ
  - **(⑤, ⑥)** の重さが同じ
- **注意:** 「椿」の条件も満たしている場合は、優先順位の高い「椿」として判定される。

---

## 3. 基本役 (Kihon-yaku)
駒の数値（weight）や種類の並びによって成立する標準的な役。

### 桜花 (Ouka)
- **基礎点:** 2点
- **成立条件:** 3段以上で、塔を構成する全ての駒の **重さ (weight)** が等しいこと。
- **加点:** 高さ加点、染め加点が適用される。
- **判定優先:** 基本役。

### 蓮花 (Renge)
- **基礎点:** 1点
- **成立条件:** 3段以上で、塔を構成する駒の **重さ (weight)** が連番（シーケンス）になっていること。
  - 例：ポップした順（上から下）に 4・5・6 など。
- **加点:** 高さ加点、染め加点が適用される。
- **判定優先:** 基本役（「桜花」より点数が低いため、両立する場合は「桜花」優先）。

### 奇数蓮花 (Kisu Renge)
- **基礎点:** 1点
- **成立条件:** 3段以上で、重さが **1つ飛ばしの連番** かつ **全て奇数** であること。
  - 例：ポップした順に 3・5・7 など。
- **加点:** 高さ加点、染め加点が適用される。

### 偶数蓮花 (Gusu Renge)
- **基礎点:** 1点
- **成立条件:** 3段以上で、重さが **1つ飛ばしの連番** かつ **全て偶数** であること。
  - 例：ポップした順に 2・4・6 など。
- **加点:** 高さ加点、染め加点が適用される。

---

## 4. 組み合わせ役 (Kumiai-yaku)
複数の基本役や特定の組み合わせによって成立する役。共通の命名・加点ルールが適用される。

### 桜々花 (Sakura-Ouka)
- **基礎点:** 4点
- **成立条件:** 6枚の塔で、以下の2つのブロックがそれぞれ「桜花」の条件（重さが一致）を満たしていること。
  - **(①, ②, ③)** が「桜花」
  - **(④, ⑤, ⑥)** が「桜花」
- **加点:** 高さ加点（6段なので固定）、染め加点が適用される。

### 蓮々花 (Renge-Renge)
- **基礎点:** 2点
- **成立条件:** 6枚の塔で、以下の2つのブロックがそれぞれ「蓮花」の条件（連番）を満たしていること。
  - **(①, ②, ③)** が「蓮花」
  - **(④, ⑤, ⑥)** が「蓮花」
- **加点:** 高さ加点（6段なので固定）、染め加点が適用される。

### 桜蓮花 (Sakura-Renge)
- **基礎点:** 3点
- **成立条件:** 6枚の塔で、以下の組み合わせを満たしていること。
  - **(①, ②, ③)** が「桜花」
  - **(④, ⑤, ⑥)** が「蓮花」
- **加点:** 高さ加点（6段）、染め加点が適用される。

### 蓮桜花 (Renge-Ouka)
- **基礎点:** 3点
- **成立条件:** 6枚の塔で、以下の組み合わせを満たしていること。
  - **(①, ②, ③)** が「蓮花」
  - **(④, ⑤, ⑥)** が「桜花」
- **加点:** 高さ加点（6段）、染め加点が適用される。

---
