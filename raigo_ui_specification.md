# 雷轟（Raigo） UI構成・画面要素定義書

## 1. 駒 (Pieces) と マーカー
- **通常駒:** 1-108番。
- **隠駒 (On-goma):** ターンプレイヤーマーカー。手番プレイヤーのテーブルに配置される。移動前後に割り込み処理が発生する場合がある。

## 2. ゲームの進行（ステップ詳細）

| コード | ステップ名 | 内容詳細 |
| :--- | :--- | :--- |
| **00** | **ターン開始** | ターンプレイヤーの確定、隠駒の位置確認。 |
| **10** | **【開】開始** | 開フェーズの開始。 |
| 11 | 任意スキップ | 自身の桜門に駒が1つ以上ある場合、実行するか選択。 |
| 12 | 自動スキップ | 自身の桜門に駒がない場合、自動で15をスキップして20へ。 |
| 15 | 【開】実行 | 1. `hand3` から1つ選び `kumo` へ移動。<br>2. `kumo` の駒を `hand` または `inside` へ移動。<br>3. `hand3` の残りを `exclusion` へ。<br>4. 以降 `hand3` の定員を1へ変更。 |
| **20** | **【現】開始** | 現フェーズの開始。 |
| 25 | 【現】実行 | `inside` から最大2つ選び `hand` へ移動。 |
| **30** | **【選】開始** | 選フェーズの開始。 |
| 31 | 満杯判定 | `hand` と `inside` が全て埋まっているか確認。 |
| 32 | 減点処理 | 満杯時：2つ選び `kyoukoku` へ移動し、得点 -1。 |
| 35 | 【選】ドロー | `deck` から1〜2個選び `kumo` へ置く。 |
| 36 | 整理移動 | `kumo` の駒を `hand` または `inside` へ移動。 |
| **40** | **【積/発】開始** | 積/発フェーズの開始。 |
| 41 | アクション選択 | 自身の `hand` から1つ選び、積 or 発 を決定。 |
| 45 | 【積】実行 | 選んだ駒を `kumo` 経由で桜門の一番上に重ねる。 |
| 46 | 【発】実行 | 駒を表向きにし、能力実行後に `kyoukoku` へ。 |
| **80** | **【隠】開始** | 隠フェーズの開始。 |
| 81 | 移動前割り込み | 隠駒移動前の割り込み処理。 |
| 85 | 隠駒移動 | 隠駒（マーカー）を移動。 |
| 89 | 移動後割り込み | 隠駒移動後の割り込み処理。 |
| **99** | **ターン終了** | 手番終了処理。 |

## 3. 領域定義 (更新版)
- **hand3:** フェーズ進行により定員が 3 -> 1 へ動的に変化する特殊コンテナ。
- **雲 (Kumo):** 移動の中継地点。
- **レコード (Record):** 役が完成した際の履歴。
- **隠駒置き場:** ターンプレイヤーを示すマーカーの配置場所。
